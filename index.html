<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Southern US Interactive Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
      @font-face {
        font-family: "Gotham";
        src: url("./fonts/Gotham-book.woff2") format("woff2"),
          url("./fonts/Gotham-book.woff") format("woff");
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: "Gotham";
        src: url("./fonts/Gotham-bold.woff2") format("woff2"),
          url("./fonts/Gotham-bold.woff") format("woff");
        font-weight: 700;
        font-style: normal;
        font-display: swap;
      }

      * {
        font-family: "Gotham", "Helvetica Neue", Arial, sans-serif;
        font-weight: 400; /* Book weight */
      }
      #map {
        height: 100vh;
      }

      .state-label {
        font-size: 14px;
        font-weight: 700; /* Bold weight for state names */
        color: #001b31;
        background: transparent;
        text-align: center;
        transition: color 0.3s ease;
        pointer-events: none; /* Allow clicking through to state underneath */
      }

      .city-label {
        font-size: 11px;
        background: transparent;
        color: #414b54;
        pointer-events: none; /* Not clickable and allow clicking through to state underneath */
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
      }

      .modal-content {
        background-color: #fefefe;
        margin: 5% auto;
        padding: 0;
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        animation: modalSlideIn 0.3s ease;
      }

      @keyframes modalSlideIn {
        from {
          transform: translateY(-50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .modal-header {
        background: #00437a;
        color: white;
        padding: 20px;
        border-radius: 10px 10px 0 0;
        text-align: center;
        position: relative;
      }

      .modal-header h2 {
        margin: 0;
        font-size: 24px;
        font-weight: 700; /* Bold weight for modal state names */
      }

      .close {
        position: absolute;
        right: 20px;
        top: 20px;
        color: white;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        line-height: 1;
      }

      .close:hover {
        opacity: 0.7;
      }

      .modal-body {
        padding: 30px;
      }

      .flag-section {
        text-align: center;
        margin-bottom: 25px;
      }

      .state-flag {
        width: 120px;
        height: 80px;
        border: 2px solid #ddd;
        border-radius: 5px;
        object-fit: cover;
      }

      .description-section {
        margin-bottom: 25px;
      }

      .description-section h3 {
        color: #00437a;
        margin-bottom: 10px;
        font-size: 22px;
        font-weight: 700;
        text-transform: none;
      }

      .description-section p {
        line-height: 1.6;
        color: #414b54;
        margin: 0;
      }

      .music-section {
        margin-bottom: 30px;
      }

      .music-section h3 {
        color: #00437a;
        margin-bottom: 10px;
        font-size: 22px;
        font-weight: 700;
        text-transform: none;
      }

      .music-section p {
        line-height: 1.6;
        color: #444;
        margin: 0;
      }

      .cta-section {
        text-align: center;
      }

      .cta-button {
        background: #fbba00;
        color: #00437a;
        border: none;
        padding: 14px 32px;
        font-size: 16px;
        border-radius: 100px;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        font-weight: 700;
        text-transform: uppercase;
      }

      .cta-button:hover {
        background: #fcc833;
      }

      .artists-section {
        margin-bottom: 25px;
      }

      .artists-section h3 {
        color: #00437a;
        margin-bottom: 15px;
        font-size: 22px;
        font-weight: 700;
        text-transform: none;
      }

      .artists-container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: flex-start;
      }

      .artist-pill {
        background: transparent;
        color: #414b54;
        border: 1px solid #00437a;
        padding: 8px 16px;
        border-radius: 100px;
        font-size: 14px;
        font-weight: 400;
        text-align: center;
        display: inline-block;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>

    <!-- State Info Modal -->
    <div id="stateModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close">&times;</span>
          <h2 id="modalTitle">State Name</h2>
        </div>
        <div class="modal-body">
          <div class="flag-section">
            <img id="stateFlag" class="state-flag" src="" alt="State Flag" />
          </div>
          <div class="description-section">
            <h3>About</h3>
            <p id="stateDescription"></p>
          </div>
          <div class="music-section">
            <h3>Musical Heritage</h3>
            <div id="stateArtists" class="artists-container"></div>
          </div>
          <div class="artists-section">
            <h3>Must-Visit Attractions</h3>
            <div id="stateAttractions" class="artists-container"></div>
          </div>
          <div class="cta-section">
            <button id="ctaButton" class="cta-button">Plan Your Visit</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Leaflet + TopoJSON -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>

    <script>
      // Create locked map view
      const map = L.map("map", {
        minZoom: 5,
        maxZoom: 7,
        zoomControl: false,
        attributionControl: false,
        dragging: true,
        scrollWheelZoom: false,
        doubleClickZoom: false,
        boxZoom: false,
        keyboard: false,
        maxBounds: [
          [28, -95], // SW
          [37, -75], // NE
        ],
      }).setView([33, -85], 6);

      // Minimal base map - no roads, no labels
      L.tileLayer(
        "https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",
        {
          attribution: "&copy; OpenStreetMap contributors",
        }
      ).addTo(map);

      // Define state data globally so modal functions can access it
      const stateNames = {
        "01": "Alabama",
        22: "Louisiana",
        28: "Mississippi",
        37: "North Carolina",
        45: "South Carolina",
        47: "Tennessee",
      };

      // Comprehensive state data for modal
      const stateData = {
        "01": {
          name: "Alabama",
          flag: "https://upload.wikimedia.org/wikipedia/commons/5/5c/Flag_of_Alabama.svg",
          description:
            "Known as the Heart of Dixie, Alabama is famous for its rich Civil Rights history, beautiful Gulf Coast beaches, and southern hospitality.",
          music:
            "Alabama is the birthplace of the legendary country group Alabama and has deep roots in country, blues, and gospel music, with cities like Muscle Shoals being iconic recording destinations that helped shape Southern rock and country music.",
          artists: [
            "The Red Clay Strays",
            "Muscadine Bloodline",
            "Jason Isbell",
          ],
          attractions: [
            "Gulf State Park",
            "U.S. Space & Rocket Center",
            "Historic Selma",
          ],
        },
        22: {
          name: "Louisiana",
          flag: "https://upload.wikimedia.org/wikipedia/commons/e/e0/Flag_of_Louisiana.svg",
          description:
            "Louisiana captivates visitors with its unique Creole and Cajun culture, world-renowned cuisine, vibrant festivals, and the historic charm of New Orleans.",
          music:
            "While famous for jazz and blues, Louisiana has a rich country music heritage with zydeco influences and has produced country stars like Tim McGraw, blending traditional country with the state's unique cultural rhythms.",
          artists: ["Lucky Daye", "Jon Batiste", "Aaron Neville"],
          attractions: ["French Quarter", "Garden District", "Bourbon Street"],
        },
        28: {
          name: "Mississippi",
          flag: "https://upload.wikimedia.org/wikipedia/commons/4/42/Flag_of_Mississippi.svg",
          description:
            "Mississippi is the birthplace of blues music, home to literary legends, and offers rich Delta culture along the mighty Mississippi River.",
          music:
            "Mississippi is the cradle of American music, producing country legends like Faith Hill, Tammy Wynette, and Charley Pride, while its Delta blues tradition deeply influenced country music's emotional storytelling and guitar styles.",
          artists: ['Christone "Kingfish" Ingram', "Charlie Worsham", "KIRBY"],
          attractions: [
            "Blues Trail",
            "Vicksburg Battlefield",
            "Natchez Trace",
          ],
        },
        37: {
          name: "North Carolina",
          flag: "https://upload.wikimedia.org/wikipedia/commons/b/bb/Flag_of_North_Carolina.svg",
          description:
            "North Carolina boasts stunning Blue Ridge Mountains, beautiful Outer Banks coastline, vibrant cities, and a perfect blend of mountain and coastal culture.",
          music:
            "North Carolina is home to legendary bluegrass and country artists like Doc Watson and Earl Scruggs, and the state's Appalachian mountain music traditions have profoundly shaped modern country and folk music.",
          artists: ["Rhiannon Giddens", "Chatham County Line", "MJ Lenderman"],
          attractions: [
            "Blue Ridge Parkway",
            "Outer Banks",
            "Great Smoky Mountains",
          ],
        },
        45: {
          name: "South Carolina",
          flag: "https://upload.wikimedia.org/wikipedia/commons/6/69/Flag_of_South_Carolina.svg",
          description:
            "South Carolina offers stunning coastal beauty, historic Charleston, beautiful plantations, and a perfect blend of Southern tradition and coastal living.",
          music:
            "South Carolina has contributed significantly to country music with artists like Darius Rucker (formerly of Hootie & the Blowfish) and has a strong bluegrass tradition that influences modern country music throughout the region.",
          artists: ["Darius Rucker", "Edwin McCain", "Ranky Tanky"],
          attractions: [
            "Historic Charleston",
            "Myrtle Beach",
            "Magnolia Plantation",
          ],
        },
        47: {
          name: "Tennessee",
          flag: "https://upload.wikimedia.org/wikipedia/commons/9/9e/Flag_of_Tennessee.svg",
          description:
            "Tennessee is the heart of country music, home to Nashville and Memphis, offering rich musical heritage, stunning Smoky Mountains, and vibrant cultural attractions.",
          music:
            "Tennessee is the undisputed capital of country music, home to the Grand Ole Opry, Country Music Hall of Fame, and countless legendary artists from Hank Williams to Dolly Parton, making Nashville the global center of country music production and performance.",
          artists: ["Damien Horne", "David Tolliver", "Maura Streppa"],
          attractions: [
            "Nashville Music Row",
            "Graceland",
            "Great Smoky Mountains",
          ],
        },
      };

      // Modal functionality - define before the fetch
      const modal = document.getElementById("stateModal");
      const closeBtn = document.getElementsByClassName("close")[0];

      function openStateModal(stateId) {
        const state = stateData[stateId];
        if (!state) return;

        // Populate modal content
        document.getElementById("modalTitle").textContent = state.name;
        document.getElementById("stateFlag").src = state.flag;
        document.getElementById("stateFlag").alt = `Flag of ${state.name}`;
        document.getElementById("stateDescription").textContent =
          state.description;

        // Populate artists pills
        const artistsContainer = document.getElementById("stateArtists");
        artistsContainer.innerHTML = "";
        state.artists.forEach((artist) => {
          const pill = document.createElement("div");
          pill.className = "artist-pill";
          pill.textContent = artist;
          artistsContainer.appendChild(pill);
        });

        // Populate attractions pills
        const attractionsContainer =
          document.getElementById("stateAttractions");
        attractionsContainer.innerHTML = "";
        state.attractions.forEach((attraction) => {
          const pill = document.createElement("div");
          pill.className = "artist-pill";
          pill.textContent = attraction;
          attractionsContainer.appendChild(pill);
        });

        document.getElementById(
          "ctaButton"
        ).textContent = `Plan Your Visit to ${state.name}`;

        // Show modal
        modal.style.display = "block";
      }

      function closeModal() {
        modal.style.display = "none";
      }

      // Event listeners
      closeBtn.onclick = closeModal;

      window.onclick = function (event) {
        if (event.target === modal) {
          closeModal();
        }
      };

      document.getElementById("ctaButton").onclick = function () {
        const stateName = document.getElementById("modalTitle").textContent;
        alert(
          `Planning your visit to ${stateName}! This would redirect to a travel planning service.`
        );
      };

      // Load low-fidelity US state shapes
      fetch("https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json")
        .then((res) => res.json())
        .then((topoData) => {
          const geojson = topojson.feature(topoData, topoData.objects.states);

          const stateCentroids = {
            "01": [32.7396, -86.8435], // Alabama
            22: [31.0, -92.0], // Louisiana
            28: [32.6, -89.4], // Mississippi
            37: [35.5, -79.0], // North Carolina
            45: [33.8, -80.9], // South Carolina
            47: [35.8, -86.4], // Tennessee
          };

          L.geoJSON(geojson, {
            filter: (feature) =>
              Object.keys(stateNames).includes(feature.id.toString()),
            style: {
              color: "#00437a",
              weight: 1,
              fillOpacity: 0.15,
              fillColor: "#00437a",
            },
            onEachFeature: (feature, layer) => {
              // Add hover effects
              layer.on("mouseover", function (e) {
                const layer = e.target;
                layer.setStyle({
                  weight: 3,
                  color: "#fbba00",
                  fillOpacity: 0.3,
                  fillColor: "#fbba00",
                });
                layer.bringToFront();
              });

              layer.on("mouseout", function (e) {
                const layer = e.target;
                layer.setStyle({
                  weight: 1,
                  color: "#00437a",
                  fillOpacity: 0.15,
                  fillColor: "#00437a",
                });
              });

              // Add click effect with animation
              layer.on("click", function (e) {
                const layer = e.target;
                // Brief highlight animation
                layer.setStyle({
                  weight: 4,
                  color: "#f7931e",
                  fillOpacity: 0.4,
                  fillColor: "#f7931e",
                });

                setTimeout(() => {
                  layer.setStyle({
                    weight: 1,
                    color: "#00437a",
                    fillOpacity: 0.15,
                    fillColor: "#00437a",
                  });
                }, 200);

                openStateModal(feature.id);
              });

              // Add cursor pointer on hover
              layer.on("mouseover", function () {
                map.getContainer().style.cursor = "pointer";
              });

              layer.on("mouseout", function () {
                map.getContainer().style.cursor = "";
              });
            },
          }).addTo(map);

          // Add state labels
          for (const id in stateCentroids) {
            L.marker(stateCentroids[id], {
              icon: L.divIcon({
                className: "state-label",
                html: stateNames[id],
                iconSize: [100, 20],
              }),
            }).addTo(map);
          }

          // Add manually-specified cities
          const cities = [
            { name: "Birmingham, AL", coords: [33.5186, -86.8104] },
            { name: "New Orleans, LA", coords: [29.9511, -90.0715] },
            { name: "Jackson, MS", coords: [32.2988, -90.1848] },
            { name: "Charlotte, NC", coords: [35.2271, -80.8431] },
            { name: "Charleston, SC", coords: [32.7765, -79.9311] },
            { name: "Nashville, TN", coords: [36.1627, -86.7816] },
          ];

          cities.forEach((city) => {
            L.marker(city.coords, {
              icon: L.divIcon({
                className: "city-label",
                html: city.name,
                iconSize: [100, 20],
              }),
            }).addTo(map);
          });
        });
    </script>
  </body>
</html>
